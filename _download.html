<script type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", () => {
        const downloadLinks = window.document.querySelectorAll("#download-table a");
        const acceptButton = window.document.querySelector("#accept-button");

        downloadLinks.forEach((link) => {
            link.addEventListener("click", (ev) => {
                ev.preventDefault();

                const downloadTarget = ev.currentTarget.getAttribute("data-original-href");
                const dialog = new bootstrap.Modal('#accept-dialog', {});

                // save the download target for the accept event
                acceptButton.setAttribute("data-download-target", downloadTarget);
                dialog.show();
            });
            link.setAttribute("href", "");
        });

        acceptButton.addEventListener("click", () => {
            const downloadTarget = acceptButton.getAttribute("data-download-target");
            window.open(downloadTarget);
        });

    });
</script>